[TOC]

# Testing

## Test as You Write the Code

### è¾¹ç•Œæµ‹è¯•

* Test code at its boundaries.
  * ä¾‹å¦‚ï¼š`non-existent` or `empty` inputï¼Œa `single` input item, an exactly `full` array, and so on.
  * è¿™ä¸ªè§‚ç‚¹æ˜¯ï¼šå¤§éƒ¨åˆ†é”™è¯¯ä¼šå‡ºç°åœ¨è¾¹ç•Œä¸Šï¼Œå¦‚æœåœ¨è¾¹ç•Œä¸Šéƒ½å¯ä»¥é€šè¿‡æµ‹è¯•ï¼Œé‚£ä¹ˆå…¶ä½™åœ°æ–¹ä¸€èˆ¬æ¥è¯´ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜
  * Boundary condition checking is effective for finding `off-by-one errors`.


### Test pre- and post-conditions

to verify that expected or necessary properties hold before (pre-condition) and after (post-condition) some piece of code executes.

`pre-condition` å³æŸæ®µä»£ç æ‰§è¡Œå‰çš„æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œå¦‚è¾“å…¥åˆæ³•æ€§

`post-condition` å³è¯¥æ®µä»£ç æ‰§è¡Œåçš„æ€§è´¨ï¼Œæ˜¯å¦ç¬¦åˆé¢„æœŸ

### Use `assertions`

æ–­è¨€å¯¹äºæ£€æŸ¥ `Interface` çš„æ€§è´¨æ¯”è¾ƒæœ‰ç”¨

### Program defensively

ç»™ç¨‹åºè¿›è¡Œé˜²å¾¡ï¼ŒåŠ å…¥ä»£ç å»å¤„ç†æŸäº›â€œéé¢„æœŸâ€æƒ…å†µ

### Check `error` returns

One often-overlooked defense is to check the `error` returns from `library functions` and `system calls`. Return values from input routines such as `fread` and `fscanf `should always be checked for errors, as should any file open call such as `fopen`.

## Systematic Testing

æµ‹è¯•è¦å½¢æˆä¸€ä¸ªç³»ç»ŸåŒ–çš„æµç¨‹ï¼Œæœ‰ç§©åºåœ°åšï¼Œå°±ä¸ä¼šå¿½ç•¥æ‰æŸäº›ä¸œè¥¿ï¼ŒåŒæ—¶è¦åšè®°å½•ğŸ“ï¼Œçœ‹åˆ°äº†å“ªä¸€æ­¥

### Test incrementally

æµ‹è¯•å’Œå†™ç¨‹åºåº”è¯¥åŒæ­¥è¿›è¡Œï¼Œè€Œä¸æ˜¯ä¸€è‚¡è„‘å†™å‡ºç¨‹åºåå†æ¥æµ‹è¯•ã€‚å†™å‡ºä¸€ç‚¹ï¼Œæµ‹è¯•ä¸€ç‚¹ã€‚ä¸¤ä¸ªç»„ä»¶ï¼ˆå·²å•ç‹¬é€šè¿‡å„è‡ªçš„æµ‹è¯•ï¼‰ï¼Œè¿æ¥èµ·æ¥åä¹Ÿæµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹ä»–ä»¬èƒ½å¦åˆåœ¨ä¸€èµ·æ­£å¸¸å·¥ä½œ

### Test simple parts first

Tests should focus first on the simplest and most commonly executed features of a program; only when those are working properly should you move on.

### è¿™æ ·è¿›è¡Œæµ‹è¯•

1. è¾¹ç•Œæ¡ä»¶æµ‹è¯•
2. ç³»ç»ŸåŒ–æµ‹è¯•å„ç§å°æƒ…å†µï¼Œä»ç®€å•åˆ°å¤æ‚
3. å³ä½¿æµ‹è¯•é›†å¾ˆå°ï¼ˆç”¨æ‰‹å·¥å®Œæˆä¹Ÿå®¹æ˜“ï¼‰ï¼Œä¹Ÿåº”è¯¥å†™`æµ‹è¯•ä»£ç `ï¼ˆè°ƒç”¨å¾…æµ‹è¯•ç‰‡æ®µï¼‰æ¥è‡ªåŠ¨åŒ–


#### æµ‹è¯•äºŒåˆ†æœç´¢çš„ä¾‹å­

ä»¥ä¸‹æƒ…å†µæ˜¯ è¾¹ç•Œæ¡ä»¶æµ‹è¯• + ç³»ç»Ÿæµ‹è¯•å„å°æƒ…å†µï¼ŒæŒ‰å¤æ‚æ€§æ’åˆ—å¦‚ä¸‹ï¼š

* search an array with `no` elements 
* search an array with `one` element and a trial value that is 
  * less than the single element in the array 
  * equal to the single element 
  * greater than the single element 
* search an array with `two` elements and trial values that
  * check all five possible positions 
* check behavior with `duplicate` elements in the array and trial values
  * less than the value in the array 
  * equal to the value 
  * greater than the value 
* search an array with `three` elements as with two elements 
* search an array with `four` elements as with two and three


ä»¥ä¸Šæƒ…å†µè™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯ç”¨æ‰‹å·¥çš„æ–¹å¼ä¹Ÿä¼šå¾ˆçƒ¦çš„ã€‚æ‰€ä»¥è¿˜æ˜¯å†™è‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç æ¥å®Œæˆçš„å¥½ã€‚

## Test Automation

### Automate regression testing

`regression testing` æ˜¯æŒ‡ performs a sequence of tests that **compare** the new version of something with the previous version. å› ä¸ºåœ¨æ¯ä¸€æ¬¡ä¿®æ”¹åï¼Œè¦ä¿è¯é™¤äº†æœ‰æ„åšå‡ºçš„ä¿®æ”¹ï¼Œç¨‹åºçš„å…¶ä½™è¡Œä¸ºä»å’Œä»¥å‰ä¸€æ ·

å¯åˆ©ç”¨è„šæœ¬è¯­è¨€æ¥å†™

æ³¨æ„å›å½’æµ‹è¯•å«æœ‰ä¸€ä¸ªéšå«å‡å®šï¼Œé‚£å°±æ˜¯è®¤ä¸ºä¹‹å‰çš„ç‰ˆæœ¬äº§ç”Ÿçš„è¾“å‡ºæ˜¯æ­£ç¡®çš„ã€‚æ‰€ä»¥è¦å‘¨æœŸæ€§å›æ¥æ£€æŸ¥ä¸€ä¸‹ä¹‹å‰çš„ç‰ˆæœ¬æœ¬èº«çš„è¾“å‡ºï¼Œä¿è¯å¯é æ€§ä¸€ç›´å»¶ç»­ä¸‹å»

### Create self-contained tests

`self-contained tests` è‡ªå¸¦æµ‹è¯•è¿‡ç¨‹ä¸­çš„ è¾“å…¥å®ä¾‹ å’Œ æœŸæœ›è¾“å‡º

ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€å†™ç¨‹åºæ¥è‡ªåŠ¨ç”Ÿæˆè¿™äº›è¾“å…¥å’Œè¾“å‡º

## Test Scaffolds

æµ‹è¯•å°

å…ˆæå‡ºä¸€ä¸ªç®€å•çš„ç‰ˆæœ¬ï¼ˆå¯èƒ½æ•ˆç‡å¾ˆä½ä¸‹ï¼Œä½†æ˜¯å¯ä»¥ä¿è¯è¾“å‡ºæ˜¯å¯¹çš„ï¼‰ï¼Œå¾—åˆ°æœŸæœ›è¾“å…¥ã€‚å†åˆ©ç”¨è¿™äº›æ¥æµ‹è¯•å¯èƒ½è¿˜æœ‰é”™è¯¯çš„é«˜æ•ˆç‰ˆæœ¬ã€‚

## Stress Tests

`Higher volume` in itself tends to break things

People tend to avoid "impossible" cases like `empty` inputs or input that is `out of` order or out of range, and are unlikely to create very `long` names or `huge` data values.

åœ¨æ‰‹å¤´ä¿å­˜ä¸€æ‰¹è¿™æ ·çš„æµ‹è¯•æ–‡ä»¶ï¼Œæˆ–æ˜¯èƒ½ç”Ÿæˆå®ƒä»¬çš„ä»£ç 

## Tips for Testing



## Testing the Markov Program

æµ‹è¯•è¾¹ç•Œæ¡ä»¶

verified conservation properties ï¼ˆæŸäº›æ’å®šçš„ç‰¹å¾ï¼‰

statistical testï¼ˆç»Ÿè®¡å¿…é¡»è‡ªç„¶åˆç†ï¼‰

è‡ªåŠ¨åŒ–ï¼šç”¨ä¸€ä¸ªè„šæœ¬ï¼ˆè¿™é‡Œç”¨æ¥ Awkï¼‰äº§ç”Ÿå¿…éœ€çš„è¾“å…¥æ•°æ®ï¼Œè¿è¡Œæµ‹è¯•å¹¶å¯¹å®ƒä»¬è®¡æ—¶ï¼Œæ‰“å°å‡ºåå¸¸çš„è¾“å‡º



