[TOC]

## 规则的讨论

### 意义

> convention 的存在为你的代码增加了结构，减少了你需要考虑的事情

## 一般原则

* 名字专注于“what”，而不是“how”，要反映问题本身
  * 避免使用强烈的计算机术语
  * 例子：inputRec 与 employeeData
* 变量名长度控制在10~16个字符之间（或者 8~20 个也差不多）
  * 研究表明，这样在调试时最不费力
  * 其实也不是说死规定，而是在太长和太短中取平衡
  * 疑：下划线算吗？毕竟不影响阅读
* 短的变量名也有作用，对作用域有限的变量取短名字
  * 短名字适用于局部变量和循环变量
  * 较长的名字适用于全局变量或较少使用到的变量
* 采用某种方式对全局命名空间进行划分，避免产生命名冲突
  * C++：`namespace`
  * Java：`package`
  * 其他：为 **全局可见的类** 加上带有子系统特征的(缩写)前缀
    * 如，`uiEmployee`，`dbEmployee`
* 计算值限定词置于名字之后
  * 计算值限定词：sum、average、total、max、min、string、record、pointer 等
  * 例子：`revenueTotal`、`expenseAverage`
  * 好处：重点突出（易被优先阅读）、一致性
  * 例外——`num`
    * 约定俗成，num 在前表示总数，同时名词也变为复数。如 numCustomers 表示顾客总数
    * num 在后，表示序号。如 customerNum
    * 但最好避开这种用法，如表示总数时用 Total、Count，表示序号时用 Index 等
* 使用常用的对仗词
  * 参加后面列表



### 对仗词列表

* begin/end
* first/last
* locked/unlocked
* mix/max
* next/previous
* old/new
* visible/invisible
* source/target
* source/destination
* up/down

## 为特定的数据类型进行命名的特别原则

### 循环变量

* 处于循环内部的变量，约定俗成，用 `i`、`j`、`k`；但只用于简单循环里的循环下标
  * (或者是索性不用这个，如果程序代码经常复制、移植)
  * 如果循环内部比较复杂，如多层嵌套循环，还是用有描述性的名字好
    * 疑：之前我也是用描述性的，但是多个循环好像名字太长了？
* 一个变量，如果在循环外还需要使用，自然是要取个更有意义的名字

### 状态变量

* 标记里的名字不必再去重复添加 flag、status

* 使用具名常量（或者用作具名常量的全局变量）

  * ```c++
    //如：
    dataReady = true;
    characterType = CONTROL_CHARACTER ;
    ```

* 使用枚举类型

  * 疑：具体是如何？

### 临时变量

* 弄清楚临时变量的真实用途，用描述性的名字去命名变量
  * > 使用 `temp` 这类名字说明你可能没弄清这个变量的实际用途

### 布尔变量

* 熟悉使用典型的布尔变量命名
* 避免单独使用 status、sourceFile 这样含糊的变量名
  * status、sourceFile 没有明确指示出究竟是什么状态
  * 可以替换成 `statusOK`、`sourceFileAvailable`、`sourceFileFound` 这样的名字
* 在前面加上 `is` 有利有弊
  * 利：可以判断变量名是否清晰，如 `isStatus` 不可以只用 true/false 来回答，所以是不清晰的
  * 弊：在逻辑表达式里可读性略差（对比` if (isFound)` 和 `if (Found)`）
* 使用肯定形式
  * 不要使用像 `notFound` 这样的否定形式

#### 典型的布尔变量命名

* `done`
  * 表明某件事是否完成
* `found`
  * 表明是否已经找到某个值
* `error`
  * 表明是否有错误发生
* `success` 或 `ok`
  * 表明某个操作是否成功
  * 在具体情况中，使用更具体的描述名称去命名，以说明成功的含义

### 枚举类型

* 使用组前缀
  * 这样可以将 同属某个组的类型成员 明确表示
  * `Color_`、`Month_`
  * 例外
    * 编程语言本身就自动冠以枚举类型的名字作为前缀
      * 如 `Color.Red`，跟类的处理类似
* 枚举类型本身的命名
  * 有两种观点
    * 应和其他用户定义类型相同，如 类 的命名
    * 应和常量相同（全部大写）

### 常量

* 不要将常量的数值放入事物的命名中
  * 如 FIVE 、BEAKERS_DOEN
* 根据该常量所表示的含义来命名
  * 如 `CYCLES_NEEDED`、`DOUNUTS_MAX`

## 非正式命名规则

### 语言通用的

具体细节可能和语言有关，但是目的是一致的

* 区分变量和子程序
* 区分类和对象（或者区分类型和该类型的变量）
  * 这个比较棘手，每种方法都有优缺点
* 标识出全局变量
* 标识出成员变量
  * 前缀 `m_`
* 标识出类型声明
  * C++：全部大写
  * 加前缀 `t_`
* 标识出具名常量
  * C++、Java：全部大写，用下划线分割单词
  * 添加前缀 `c_` —— c_ResesMax 等
* 标识出枚举类型的元素
  * 全部大写
  * 或类型名加前缀 `e_`、`E_` ，成员添加基于该类型的前缀，如 `Color_`
* 在不能保证输入参数只读的语言里标识只读参数
  * 提醒这些参数不应该被修改（而因为语言的问题，有修改的可能）
  * 添加前缀 `const`、`final`、`nonmodifiable` 等
    * 添加这些只是形式的提醒，因为在该语言中对应它们功能的关键字
  * 如 C++
* 格式化命名
  * 大小写分割单词
  * 下划线分割单词
  * 不要混用上面这两种方法
* 第一个字母是不是应该大写
  * 只要使用上保持一致，就没有孰优孰劣的问题
  * Java 是首字母小写（对象名、变量名），首字母大写表示类名

### 语言相关的

参见编码风格和原书275页

#### C

#### C++

#### Java



变量名包含了以下 3 种信息：

* 变量的内容（它代表的东西）
* 数据的种类（具名常量、简单变量、用户自定义类型或类）
* 变量的作用域（private、类成员、包的、全局等）



### 清单

命名规则清单

（todo：再整理）

## 标准前缀

匈牙利命名法

理念：使用简洁准确的缩写词

### 用户自定义类型缩写 UDT

user defined type

用于表示窗体、屏幕区域等一类实体，通常不会表示任何预置的数据类型

**常见缩写**

文字处理

| 缩写   | 含义                            |
| ---- | ----------------------------- |
| ch   | character （不是指程序预置的数据类型-char） |
| scr  | screen region （屏幕区域）          |
| sel  | selection （选中范围）              |
| pa   | paragraph                     |
| doc  | document                      |
| wn   | window                        |

同时，用同样的缩写去定义这些数据类型：

```java
SCR scrUserSpace;
WN wnMain;
```

### 语义前缀

描述了变量和对象是如何使用的；同时，相比 UDT，语义前缀在一定程度上对不同的项目是通用的

| 语义前缀  | 含义                                       |
| ----- | ---------------------------------------- |
| c     | count（数量，东西的个数）                          |
| g     | global variable                          |
| i     | index into an array                      |
| first | 数组中需要处理的第一个元素，针对于操作而言的第一个，而不是数组下标顺序      |
| last  | 数组中需要处理的第一个元素，针对于操作而言的最后一个，而不是数组下标顺序     |
| lim   | 数组中需要处理的元素的上限；通常，lim = last + 1（lim 表示上限，但它在数组中并不是实际存在的下标） |
| min   | 绝对位置，在数组或其他种类的列表中，绝对的第一个元素。如 python 中的 `list[0]` |
| max   | 绝对位置，在数组或其他种类的列表中，绝对的最后一个元素。如 python 中的 `list[-1]` |
| m     | 类一级的变量，如成员变量                             |
| p     | pointer                                  |

note：first、last、lim 都是相对位置概念

使用示例：

* 可以根据需要，和 UDT 或其他语义前缀结合使用
  * （前缀，说明是用在前面）
  * `iPa`：一组段落的下标
  * `cPa`：段落的总数量

#### 优点

* 严格区分一些含义比较模糊的名字
  * 如 min、max、first、last
* 名字更加紧凑
  * 对比 `cPa` 和 `paTotal`

## 创建可读性高的短命名

### 缩写的一般原则

> 现代编程语言很少用到缩写

一些原则是彼此冲突的，不要妄求同时满足

* 使用标准缩写（如字典里的，约定俗成的）
* ==去掉所有元音（除了开头）==
  * computer -> cmptr; screen -> scrn; integer -> intgr
* 去掉虚词 and、or、the 等
* 使用每个单词的第一个或前几个字母
* 统一地在每个单词的某个（选择最合适的）字母后截断
* 保留每个单词的第一个和最后一个字母
* ==使用原始名字中的每一个重要单词，最多不超过三个==
* 去除无用后缀，如 ing、ed 等
* 保留每个音节中最引人注意的发音
  * ？
* 确保缩写没有改变变量的含义
* ==反复使用以上技术，直到每个变量名长度在 8~20 个字符间==（或是所用编程语言自身的规范）
  * thisHas8、andThisWordHasTwenty

### 避免犯错的规则

* 不要在每个单词中只删除一个字符
  * 要么删除不止一个字符，要么将单词拼写完整
  * 因为你很难回忆起自己是不是删了一个字符
* 缩写要一致
  * 这样可以避免不一致的情况：如 混用 Num 和 No，有时用 Number，有时缩写成 Num
  * 应该统一：只用 Num 或 No，不混用缩写和原始单词
* 命名应该能被读出来
  * ？：用删除元音的规则，这个有点冲突啊
* 避免容易看错或读错成其他含义的组合
* 使用含义相同的不同单词来替换，以解决缩写的命名冲突
* 在代码里加入缩写对照表的注释，以解释极短名字的含义
  * ==Translation Table、Variable、Meaning==
* 创建“标准缩写”文档，来指定、规范项目中的缩写
  * 加入版本管理系统，使得增加、修改缩写的难度增加
    * 这样，只有当一个缩写在代码中应用广泛，程序员才愿意不惜花费许多精力来为它编写文档，而不是随便就可以创建多余的缩写

### 应该避免的名字

* 会令人误解的名字或缩写
* 具有相似含义的名字
  * 因为在同一段代码里，会很容易混淆他们，出错了也很难发现
  * 相似的定义：交换两个变量的名字，却没有妨碍到对程序的理解
    * 如 input 和 inputValue
* 不同含义但名字却相似的变量
  * 很容易出错！如 clientRecs 和 clientReps，只差一个字母，很容易看错
  * 名字间应该至少有两个字母不同
* 避免使用发音相近的名字
* 一般情况下，避免在名字中使用数字
  * file1 和 file2 这些名字不好，你总能用其他更好的方法来区分这两个变量
  * 如果数字真的重要，请使用数组来代替一组单个的变量
    * ？ file[1]、file[2] 这样
* ==避免使用英语中经常拼错的单词==
  * todo：要搜寻这样一份列表
* 不要只靠大小写来区分变量名
  * 如这种做法是应该避免的：使用 frd 、Frd 和 FRD 去代表不同的东西
* 不要使用多种自然语言
  * 英语的变体也要注意，如 color 和 colour
* ==注意编程语言的保留字==
* ==不要用和变量含义完全无关的名字==
* 注意易混淆的字符
  * `1`、`l`、`I`
  * 0、O
  * 2、Z
  * S，5
  * G，6